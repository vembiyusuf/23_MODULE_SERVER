import{r as u,j as C,c as v,a as e,e as x,t as i,w as g,k as M,v as _,F as V,l as A,h as c,o as p}from"./index-D9qBvNe7.js";import{n as D}from"./navbarAdmin-BWs-Q2Wq.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const L={class:"container"},$={class:"navbar"},B={class:"form-container"},E={style:{color:"red"}},G={style:{color:"green"}},N={class:"form-input"},j={class:"game-list"},F={border:"1",cellpadding:"10"},I=["onClick"],H=["onClick"],P={class:"errors",style:{color:"red"}},z={__name:"ListUser",setup(S){const n=u(""),r=u(""),d=u(""),l=u(""),m=u([]),k=u(""),o=u(null),h=async()=>{var t,a;try{const s=await c.get("/users");m.value=s.data.users,l.value=""}catch(s){l.value=((a=(t=s.response)==null?void 0:t.data)==null?void 0:a.message)||"Gagal mengambil data users."}},U=async()=>{var t,a;try{o.value?(await c.put(`/users/${o.value}`,{username:n.value,password:r.value||void 0}),d.value="User berhasil diperbarui!"):(await c.post("/users",{username:n.value,password:r.value}),d.value="User berhasil ditambahkan!"),l.value="",n.value="",r.value="",o.value=null,await h()}catch(s){l.value=((a=(t=s.response)==null?void 0:t.data)==null?void 0:a.message)||"Gagal menyimpan user.",d.value=""}},y=t=>{const a=m.value.find(s=>s.id===t);a&&(n.value=a.username,r.value="",o.value=a.id)},b=()=>{n.value="",r.value="",o.value=null,d.value="",l.value=""},f=async t=>{if(confirm("Yakin ingin menghapus user ini?"))try{await c.delete(`/users/${t}`),d.value="User berhasil dihapus!",l.value="",await h()}catch{l.value="Gagal menghapus user."}};return C(h),(t,a)=>(p(),v("div",L,[e("div",$,[a[2]||(a[2]=e("h1",null,"Admin",-1)),x(D)]),e("div",B,[a[3]||(a[3]=e("h1",null,"Manage User",-1)),e("p",E,i(l.value),1),e("p",G,i(d.value),1),e("div",N,[g(e("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=s=>n.value=s),placeholder:"Username"},null,512),[[_,n.value]]),g(e("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=s=>r.value=s),placeholder:"Password (kosongkan jika tidak diubah)"},null,512),[[_,r.value]]),e("button",{onClick:U},i(o.value?"Update User":"Add User"),1),o.value?(p(),v("button",{key:0,onClick:b,style:{"margin-left":"10px"}},"Cancel")):M("",!0)])]),e("div",j,[a[5]||(a[5]=e("h2",null,"Daftar User",-1)),e("table",F,[a[4]||(a[4]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Username"),e("th",null,"Last Login"),e("th",null,"Aksi")])],-1)),e("tbody",null,[(p(!0),v(V,null,A(m.value,s=>(p(),v("tr",{key:s.id},[e("td",null,i(s.id),1),e("td",null,i(s.username),1),e("td",null,i(s.created_at),1),e("td",null,[e("button",{onClick:w=>y(s.id)},"Edit",8,I),e("button",{onClick:w=>f(s.id)},"Hapus",8,H)])]))),128))])]),e("p",P,i(k.value),1)])]))}};export{z as default};
