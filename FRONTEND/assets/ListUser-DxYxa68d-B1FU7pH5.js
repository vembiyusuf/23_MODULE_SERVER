import{q as u,d as L,b as x,E as m,z as p,R as a,A as h,t as g,Y as b,a as r,y as k,w as U,e as C,_ as Y,r as y}from"./index-D2tUv4QS.js";const E={class:"container"},G={class:"navbar"},D={class:"navbar-links"},q={class:"form-container"},z={style:{color:"red"}},B={style:{color:"green"}},H={class:"form-input"},I={class:"game-list"},M={border:"1",cellpadding:"10"},P=["onClick"],R=["onClick"],V={class:"errors",style:{color:"red"}},F={__name:"ListUser",setup($){const o=u(""),d=u(""),i=u(""),n=u(""),c=u([]),f=u(""),w=async()=>{try{const l=await y.post("/users",{username:o.value,password:d.value});console.log("Berhasil menambahkan user"),console.log(l.data),i.value="User berhasil ditambahkan!",n.value="",o.value="",d.value="",await v(),console.log(l.data)}catch(l){i.value="",n.value="Gagal menambahkan user.",console.error(l)}},v=async()=>{var l,e;try{const t=await y.get("/users");c.value=t.data.users,n.value="",console.log("Menampilkan user",t.data.users),console.log(c.value)}catch(t){n.value=((e=(l=t.response)==null?void 0:l.data)==null?void 0:e.message)||"Gagal mengambil data users."}},_=async l=>{if(confirm("Yakin ingin menghapus user ini?"))try{await y.delete(`/users/${l}`),i.value="User berhasil dihapus!",n.value="",await v()}catch(e){n.value="Gagal menghapus user.",console.error(e)}};return L(v),(l,e)=>{const t=x("router-link");return p(),m("div",E,[a("div",G,[e[5]||(e[5]=a("h1",null,"Admin",-1)),a("div",D,[h(t,{to:"/admins/listusers"},{default:g(()=>e[2]||(e[2]=[b("List Users")])),_:1}),h(t,{to:"/admins/"},{default:g(()=>e[3]||(e[3]=[b("List Admins")])),_:1}),h(t,{to:"/"},{default:g(()=>e[4]||(e[4]=[b("Logout")])),_:1})])]),a("div",q,[e[6]||(e[6]=a("h1",null,"Manage User",-1)),a("p",z,r(n.value),1),a("p",B,r(i.value),1),a("div",H,[k(a("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>o.value=s),placeholder:"Username"},null,512),[[U,o.value]]),k(a("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=s=>d.value=s),placeholder:"Password"},null,512),[[U,d.value]]),a("button",{onClick:w},"Add User")])]),a("div",I,[e[8]||(e[8]=a("h2",null,"Daftar User",-1)),a("table",M,[e[7]||(e[7]=a("thead",null,[a("tr",null,[a("th",null,"ID"),a("th",null,"Username"),a("th",null,"Last Login"),a("th",null,"Aksi")])],-1)),a("tbody",null,[(p(!0),m(C,null,Y(c.value,s=>(p(),m("tr",{key:s.id},[a("td",null,r(s.id),1),a("td",null,r(s.username),1),a("td",null,r(s.created_at),1),a("td",null,[a("button",{onClick:A=>l.editUser(s.id)},"Edit",8,P),a("button",{onClick:A=>_(s.id)},"Hapus",8,R)])]))),128))])]),a("p",V,r(f.value),1)])])}}};export{F as default};
