import{i as f,r as n,j as y,h as k,c as o,e as d,a,k as m,t as l,F as _,l as g,g as G,o as r,f as b,d as N}from"./index-D9qBvNe7.js";import{N as x}from"./navbarUser-BnKs1zuq.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";const U={class:"container"},C={class:"username"},S={key:0,class:"section"},V={class:"game-list"},w=["src"],B={class:"game-title"},D={class:"game-description"},M={class:"game-score-count"},T={class:"section"},$={key:0,class:"highscore-list"},j={class:"game-title"},F={class:"game-description"},H={class:"game-score"},L={class:"timestamp"},P={key:1,class:"no-data"},E={__name:"UserProfile",setup(I){const p=f().params.username,e=n({username:"",authoredGames:[],highscores:[]}),u=n([]),h=n([]);y(async()=>{try{const c=await k.get(`/users/${p}`);e.value=c.data,e.value.authoredGames=Array.isArray(e.value.authoredGames)?e.value.authoredGames:[],e.value.highscores=Array.isArray(e.value.highscores)?e.value.highscores:[],e.value.authoredGames=e.value.authoredGames.map(t=>({...t,thumbnail:`/storage/thumbnails/${t.slug}.jpg`,score_count:Math.floor(Math.random()*100)})),u.value=e.value.authoredGames.sort((t,i)=>i.slug.length-t.slug.length),h.value=e.value.highscores.sort((t,i)=>t.game.title.localeCompare(i.game.title))}catch(c){console.error(c),alert("User not found or failed to load profile.")}});function v(c){return new Date(c).toLocaleString()}return(c,t)=>{const i=G("router-link");return r(),o("div",U,[d(x),a("h1",C,"User: "+l(e.value.username),1),e.value.authoredGames.length>0?(r(),o("div",S,[t[0]||(t[0]=a("h2",{class:"section-title"},"Authored Games",-1)),a("div",V,[(r(!0),o(_,null,g(u.value,s=>(r(),o("div",{key:s.slug,class:"game-card"},[s.thumbnail?(r(),o("img",{key:0,src:s.thumbnail,alt:"Thumbnail",class:"thumbnail"},null,8,w)):m("",!0),a("h3",B,l(s.title),1),a("p",D,l(s.description),1),a("p",M,l(s.score_count)+" submitted scores",1)]))),128))])])):m("",!0),a("div",T,[t[1]||(t[1]=a("h2",{class:"section-title"},"Highscores",-1)),e.value.highscores.length>0?(r(),o("div",$,[(r(!0),o(_,null,g(h.value,s=>(r(),o("div",{key:s.game.slug,class:"score-card"},[a("h3",j,[d(i,{to:`/games/${s.game.slug}`},{default:b(()=>[N(l(s.game.title),1)]),_:2},1032,["to"])]),a("p",F,l(s.game.description),1),a("p",H,"Highscore: "+l(s.score),1),a("p",L,"Timestamp: "+l(v(s.timestamp)),1)]))),128))])):(r(),o("p",P,"No highscores found."))])])}}},K=A(E,[["__scopeId","data-v-0fce7fc9"]]);export{K as default};
