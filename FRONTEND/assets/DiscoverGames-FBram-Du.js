import{r as a,j as y,m as k,c as r,e as _,a as t,k as x,d as v,w as h,b,F as C,l as N,h as V,g as D,o as i,f as B,t as p}from"./index-D9qBvNe7.js";import{N as G}from"./navbarUser-BnKs1zuq.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";const U={class:"container"},F={class:"sort-controls"},L={class:"game-list"},S=["src","alt"],E={class:"info"},$={class:"description"},A={class:"score-count"},H={key:0,class:"loading"},I=3,M="https://via.placeholder.com/150?text=No+Image",j={__name:"DiscoverGames",setup(z){const d=a([]),c=a(0),l=a(!1),u=a(!1),o=a({by:"uploadTimestamp",order:"desc"});async function m(){if(!(l.value||u.value)){l.value=!0;try{const e=(await V.get("/games",{params:{page:c.value,size:I,sort:`${o.value.by},${o.value.order}`}})).data.content||[];e.length===0?u.value=!0:(d.value.push(...e),c.value++)}catch(n){console.error("Failed to fetch games:",n)}l.value=!1}}function f(){d.value=[],c.value=0,u.value=!1,m()}function g(){window.innerHeight+window.scrollY>=document.body.offsetHeight-100&&m()}return y(()=>{m(),window.addEventListener("scroll",g)}),k(()=>{window.removeEventListener("scroll",g)}),(n,e)=>{const w=D("router-link");return i(),r("div",U,[_(G),e[6]||(e[6]=t("h1",{class:"title"},"Discover Games",-1)),t("div",F,[t("label",null,[e[3]||(e[3]=v(" Sort by: ")),h(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>o.value.by=s),onChange:f},e[2]||(e[2]=[t("option",{value:"uploadTimestamp"},"Recently Updated",-1),t("option",{value:"scoreCount"},"Popularity",-1),t("option",{value:"title"},"Title",-1)]),544),[[b,o.value.by]])]),t("label",null,[e[5]||(e[5]=v(" Order: ")),h(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.value.order=s),onChange:f},e[4]||(e[4]=[t("option",{value:"desc"},"Descending",-1),t("option",{value:"asc"},"Ascending",-1)]),544),[[b,o.value.order]])])]),t("div",L,[(i(!0),r(C,null,N(d.value,s=>(i(),r("div",{key:s.slug,class:"game-card"},[t("img",{src:s.thumbnail||M,alt:s.title,class:"thumbnail"},null,8,S),t("div",E,[_(w,{to:`/games/${s.slug}`,class:"game-title","aria-label":"View game details"},{default:B(()=>[v(p(s.title),1)]),_:2},1032,["to"]),t("p",$,p(s.description),1),t("p",A,p(s.scoreCount)+" score(s)",1)])]))),128))]),l.value?(i(),r("p",H,"Loading more games...")):x("",!0)])}}},Y=T(j,[["__scopeId","data-v-b75e5da8"]]);export{Y as default};
